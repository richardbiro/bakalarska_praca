\chapter{Nové otvorené problémy}

\label{kap:newproblems} % id kapitoly pre prikaz ref

Najprv dokážeme nasledovnú lemu, ktorá nám zjednoduší prácu:

\begin{lemma} (Jednotková) Nech $n \in \mathbb{N^+}$. Nech $a_1, \dots , a_n , b$ sú navzájom rôzne kladné celé čísla. Potom:

\begin{enumerate}
\item nasledovná sústava nemá riešenie:
\begin{gather*}
\sum_{k=1}^{n} a_k = b \\
\sum_{k=1}^{n} a^2_k = b^2
\end{gather*}

\item nasledovná sústava má jediné riešenie pre $a_1 = 1, a_2 = 2, a_3 = 3, b = 6$:
\begin{gather*}
\sum_{k=1}^{n} a_k = b \\
\prod_{k=1}^{n} a_k = b
\end{gather*}
\end{enumerate}

\end{lemma}

\begin{proof}
\begin{enumerate}
\item Pre $n = 1$ dostaneme vzťah $a_1 = b$, čo je spor. Ak $n \geq 2$, tak dosadením $b$ do druhej rovnice dostaneme nutný vzťah $\sum_{k=1}^{n} a^2_k = (\sum_{k=1}^{n} a_k)^2$, čo sa dá upraviť na tvar $\sum_{i \neq j} a_i a_j = 0$. To je spor, keďže každé $a_i$ aj $a_j$ je kladné, a teda ich súčet nemôže byť nulový. \\

\item Pre $n = 1$ dostaneme vzťah $a_1 = b$, čo je spor. Pre $n = 2$ odvodíme vzťah $a_1 + a_2 = a_1 a_2$, z čoho vyplýva, že $a_1 = \frac{a_2}{a_2 - 1}$. Keďže čísla $a_2 - 1$ a $a_2$ sú nesúdeliteľné, zlomok môže mať celočíselnú hodnotu jedine pre $a_2 = 2$. Z toho odvodíme, že aj $a_1 = 2$, čo je spor. Pre $n \geq 4$ sa dá dokázať indukciou, že $\sum_{k=1}^{n} a_k < \prod_{k=1}^{n} a_k$ ak $a_1, \dots , a_n$ sú navzájom rôzne kladné celé čísla. Pre $n = 3$ musí platiť $a_1 + a_2 + a_3 = a_1 a_2 a_3$, čo sa dá prepísať na tvar $a_1 + a_2 = a_3 (a_1 a_2 - 1)$. Indukciou sa dá dokázať, že $a_1 + a_2 < a_1 a_2 - 1$ pre $a_1, a_2 \geq 2$. Teda nutne $a_1 = 1, a_2 = 2$, z čoho vyplýva $a_3 = 3, b = 6$.
\end{enumerate}
\end{proof}


\section{Bimagické grafy}

\subsection{Vrcholovo bimagické grafy}

\begin{definition} Nech $G$ je súvislý jednoduchý netriviálny graf. Ak existuje vrcholové ohodnotenie grafu $G$ také, že platí:
\begin{enumerate}
\item vrcholom sú priradené navzájom rôzne kladné celé čísla
\item súčty hodnôt susedov jednotlivých vrcholov sú rovnaké
\item súčty druhých mocnín hodnôt susedov jednotlivých vrcholov sú rovnaké
\end{enumerate}
tak $G$ nazývame \textbf{vrcholovo bimagickým grafom}.
\end{definition}

\begin{theorem}
\label{vbgdegree1}
Nech $G$ je vrcholovo bimagický graf. Ak $G$ obsahuje dvojicu vrcholov stupňa $1$, potom majú spoločného suseda.
\end{theorem}

\begin{proof} Sporom. Nech $G$ obsahuje dva vrcholy $u,v$ stupňa $1$, ktoré nemajú spoločného suseda. Nech $x$ je hodnota vrchola $u$. Nech $y$ je hodnota vrchola $v$. \\

Nech sú vrcholy $u,v$ susedné. Podľa $u$ má graf magický súčet $y$ a podľa $v$ má graf magický súčet $x$. Z toho vyplýva $x = y$, čo je spor s tým, že vrcholom sú priradené navzájom rôzne čísla. \\

Nech majú vrcholy $u,v$ rôznych susedov $w_1, w_2$. Označme hodnoty týchto vrcholov $z_1, z_2$. Podľa $u$ má graf magický súčet $z_1$ a podľa $v$ má graf magický súčet $z_2$. Z toho vyplýva $z_1 = z_2$, čo je opäť spor.
\end{proof} 

\begin{consequence} Stromy nie sú vrcholovo bimagické.
\end{consequence}

\begin{proof} Z predchádzajúcej vety vyplýva, že jediným stromom, ktorý môže byť vrcholovo bimagickým, je $K_{1,n}$ pre nejaké $n \in \mathbb{N}$. Nech $v$ je koreň tohto stromu a $v_1, \dots , v_n$ sú jeho listy. Nech $b$ je hodnota koreňa a $a_1, \dots , a_n$ sú hodnoty jeho listov. Podľa $v$ má graf magický súčet $\sum_{k=1}^{n} a_k$ a podľa $v_1$ má graf magický súčet $b$. Podľa $v$ má graf bimagický súčet $\sum_{k=1}^{n} a_k^2$ a podľa $v_1$ má graf magický súčet $b^2$. Z toho vyplýva, že by sústava z jednotkovej lemy mala riešenie, čo je spor.
\end{proof} 

\begin{theorem}
\label{vbgdegree2}
Nech $G$ je vrcholovo bimagický graf. Potom majú všetky vrcholy stupňa $2$ rovnakú množinu susedov.
\end{theorem}

\begin{proof} Sporom. Nech $G$ obsahuje dva vrcholy $u,v$ stupňa $2,$ ktoré nemajú rovnakú množinu susedov. Nech $x$ je hodnota vrchola $u$. Nech $y$ je hodnota vrchola $v$. \\

Nech sú vrcholy $u,v$ susedné. Nech $w_1$ je druhý sused $u$ a $z_1$ je jeho hodnota. Nech $w_2$ je druhý sused $v$ a $z_2$ je jeho hodnota. Podľa $u$ má graf magický súčet $y + z_1$ a podľa $v$ má graf magický súčet $x + z_2$. Podľa $u$ má graf bimagický súčet $y^2 + z^2_1$ a podľa $v$ má graf bimagický súčet $x^2 + z^2_2$.  To znamená, že $x + z_2 = y + z_1$ a zároveň $x^2 + z^2_2 = y^2 + z^2_1$. Z duplikačnej lemy potom vyplýva, že $y = x$ alebo $y = z_2$, čo je spor s tým, že vrcholom sú priradené navzájom rôzne čísla. \\

Nech majú vrcholy $u,v$ práve jedného spoločného suseda $w$, jeho hodnotu označíme $z$. Nech $w_1$ je druhý sused $u$ a $z_1$ je jeho hodnota. Nech $w_2$ je druhý sused $v$ a $z_2$ je jeho hodnota. Podľa $u$ má graf magický súčet $z + z_1$ a podľa $v$ má graf magický súčet $z + z_2$. Z toho vyplýva $z_1 = z_2$, čo je spor. \\

Nech majú vrcholy $u,v$ odlišných susedov. Nech $w_1, w_2$ sú susedia $u$, pričom ich hodnoty sú $z_1, z_2$. Nech $w_3, w_4$ sú susedia $v$, pričom ich hodnoty sú $z_3, z_4$. Podľa $u$ má graf magický súčet $z_1 + z_2$ a podľa $v$ má graf magický súčet $z_3 + z_4$. Podľa $u$ má graf bimagický súčet $z^2_1 + z^2_2$ a podľa $v$ má graf bimagický súčet $z^2_3 + z^2_4$. To znamená, že $z_1 + z_2 = z_3 + z_4$ a zároveň $z^2_1 + z^2_2 = z^2_3 + z^2_4$. Z duplikačnej lemy potom vyplýva, že $z_3 = z_1$ alebo $z_3 = z_2$, čo je opäť rovnaký spor.
\end{proof}

\begin{theorem} 
\label{vbgdegree3}
Nech $G$ je vrcholovo bimagický graf. Potom buď má každá dvojica nesusedných vrcholov stupňa $3$ rovnakú množinu susedov, alebo nemá spoločného suseda.
\end{theorem}

\begin{proof} Sporom. Nech $G$ obsahuje dva nesusedné vrcholy $u,v$ stupňa $3$, ktoré majú práve jedného alebo dvoch spoločných susedov. Nech $x$ je hodnota vrchola $u$. Nech $y$ je hodnota vrchola $v$. \\

Nech majú vrcholy $u,v$ práve jedného spoločného suseda $w$, jeho hodnotu označíme $z$. Nech $w_1, w_2$ sú zvyšní susedia $u$ a $z_1, z_2$ sú ich hodnoty. Nech $w_3, w_4$ sú zvyšní susedia $v$ a $z_3, z_4$ sú ich hodnoty. Podľa $u$ má graf magický súčet $z + z_1 + z_2$ a podľa $v$ má graf magický súčet $z + z_3 + z_4$. Podľa $u$ má graf bimagický súčet $z^2 + z^2_1 + z^2_2$ a podľa $v$ má graf magický súčet $z^2 + z^2_3 + z^2_4$. To znamená, že $z_1 + z_2 = z_3 + z_4$ a zároveň $z^2_1 + z^2_2 = z^2_3 + z^2_4$. Z duplikačnej lemy potom vyplýva, že $z_3 = z_1$ alebo $z_3 = z_2$, čo je spor s tým, že vrcholom sú priradené navzájom rôzne čísla. \\

Nech majú vrcholy $u,v$ práve dvoch spoločných susedov $w_1, w_2$, ich hodnoty označíme $z_1, z_2$. Nech $w_3$ je zvyšný sused $u$ a $z_3$ je jeho hodnota. Nech $w_4$ je zvyšný sused $v$ a $z_4$ je jeho hodnota. Podľa $u$ má graf magický súčet $z_1 + z_2 + z_3$ a podľa $v$ má graf magický súčet $z_1 + z_2 + z_4$. Z toho vyplýva $z_3 = z_4$, čo je opäť spor.
\end{proof}

\begin{theorem} Nech $G$ je vrcholovo bimagický graf. Nech $e$ je most v $G$. Nech $G_1, G_2$ sú komponenty, ktoré vzniknú odobraním $e$ z $G$. Potom $G_1 ~\cup~ e, G_2 ~\cup~ e$ sú vrcholovo bimagické grafy. 
\end{theorem}

\begin{proof}
Použijeme rovnaké vrcholové ohodnotenie ako v pôvodnom grafe $G$.
\end{proof}

\begin{theorem} Jediný kubický vrcholovo bimagický graf je $K_{3,3}$.
\end{theorem}

\begin{proof} Nech $G$ je kubický graf, o ktorom vieme, že je vrcholovo bimagický. V grafe $G$ určite existujú dva susedné vrcholy $u,v$. Nech $w_1, w_2$ sú zvyšní susedia $u$. Nech $w_3, w_4$ sú zvyšní susedia $v$. Vrcholy $u,v$ sú susedné a majú stupeň 3. Rozoberieme všetky možnosti:

\begin{enumerate}
\item Nech sú $w_1, w_2, w_3, w_4$ navzájom rôzne. Vrcholy $w_1$ a $v$ majú spoločného suseda $u$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Susedné byť nemôžu, pretože potom by mal $v$ stupeň aspoň 4. Teda v $G$ musí existovať hrana $w_1 w_3$ aj hrana $w_1 w_4$. \\

Zároveň, vrcholy $w_2$ a $v$ majú tiež spoločného suseda $u$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Susedné byť nemôžu, pretože potom by mal $v$ stupeň aspoň 4. Teda v $G$ musí existovať hrana $w_2 w_3$ aj hrana $w_2 w_4$. \\

Tým sme dostali graf $K_{3,3}$, ktorý vieme vrcholovo bimagicky ohodnotiť.

\item Nech $w_1 = w_3$ a $w_2 \neq w_4$. Vrcholy $w_1$ a $w_2$ majú spoločného suseda $u$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Teda v $G$ musí existovať hrana $w_1 w_2$ alebo hrana $w_2 v$. \\

Zároveň, vrcholy $w_1$ a $w_4$ majú spoločného suseda $v$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Teda v $G$ musí existovať hrana $w_1 w_4$ alebo hrana $w_4 u$. \\

Lenže ak z každých dvoch potenciálnych hrán pridáme do $G$ aspoň jednu, tak jeden z vrcholov $u, v, w_1$ bude mať stupeň aspoň 4, čo je spor s tým, že graf je kubický.

\item Nech $w_1 = w_3$ a $w_2 = w_4$. Vrcholy $w_1$ a $w_2$ majú spoločných susedov $u,v$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Teda v $G$ musí existovať hrana $w_1 w_2$ alebo dvojice hrán $w_1 w_5$ a $w_2 w_5$ pre nejaký nový vrchol $w_5$. \\

Ak je v $G$ hrana $w_1 w_2$, dostaneme graf $K_4$. O ňom sa môžeme ľahko presvedčiť, že nie je vrcholovo bimagický. Ak priradíme vrcholom hodnoty $a,b,c,d$, tak musí platiť, že magické súčty $a+b+c, a+b+d, a+c+d, b+c+d$ sú rovnaké. To je možné len v prípade, že $a = b = c = d$, čo je spor s tým, že vrcholom sú priradené navzájom rôzne čísla. \\

Ak sú v $G$ hrany $w_1 w_5$ aj $w_2 w_5$ pre nejaký nový vrchol $w_5$, tiež dôjdeme k sporu. Vrcholy $u$ a $w_5$ majú spoločných susedov $w_1, w_2$, takže z vety \ref{vbgdegree3} vyplýva, že sú buď susedné, alebo musia mať všetkých susedov spoločných. Susedné byť nemôžu, pretože potom by mal $u$ stupeň aspoň 4. Teda v $G$ by musela existovať hrana $v w_5$, čo tiež nie je možné, pretože potom by mal $v$ stupeň aspoň 4.
\end{enumerate}
\end{proof}

\begin{theorem} Nech $G$ je vrcholovo bimagický graf a $u,v$ sú nejaké jeho dva vrcholy. Nech $x$ je počet susedov vrchola $u$, ktoré nie sú susedmi vrchola $v$. Nech $y$ je počet susedov vrchola $v$, ktoré nie sú susedmi vrchola $u$. Potom platí:
\begin{gather*}
\label{vbgcondition}
x = 0 \iff y = 0 \\
x,y \neq 1 \\
(x,y) \neq (2,2)
\end{gather*}
\end{theorem}

\begin{proof} Ak pre vrcholy $u,v$ zrátame magický alebo bimagický súčet, ich spoloční susedia budú zarátaní na oboch stranách. Stačí sa preto venovať magickému a bimagickému súčtu vrcholov, ktoré nie sú zároveň susedmi $u$ aj $v$ (tých je $x$, resp. $y$). Sporom budeme predpokladať, že $G$ je vrcholovo bimagický a jedna z podmienok nie je splnená. Nech $a_1, a_2, \dots, a_x$ sú hodnoty susedov vrchola $u$, ktorí nie sú susedmi vrchola $v$. Nech $b_1, b_2, \dots, b_y$ sú hodnoty susedov vrchola $v$, ktorí nie sú susedmi vrchola $u$. To znamená, že nasledovná sústava má riešenie:
\begin{gather*}
\sum_{k=1}^{x} a_k = \sum_{k=1}^{y} b_k \\
\sum_{k=1}^{x} a^2_k = \sum_{k=1}^{y} b^2_k
\end{gather*}
ak $a_1, \dots , a_x, b_1, \dots , b_y$ sú navzájom rôzne kladné celé čísla. \\

Ak neplatí prvý vzťah, tak BUNV nech $x > 0$ a $y = 0$. Druhá rovnica by potom mala tvar $\sum_{k=1}^{x} a^2_k = 0$. Jediné riešenie tejto rovnice je zjavne nulové, čo je spor s tým, že vo vrcholovo bimagickom grafe sú vrcholom priradené kladné čísla.  \\

Ak neplatí druhý vzťah, tak BUNV nech $y = 1$. Potom dostaneme sústavu z jednotkovej lemy, o ktorej vieme, že nemá riešenie (čo je spor). \\

Ak neplatí tretí vzťah, tak musí platiť $a_1 + a_2 = b_1 + b_2$ aj $a^2_1 + a^2_2 = b^2_1 + b^2_2$. Z duplikačnej lemy potom vyplýva $b_1 = a_1$ alebo $b_1 = a_2$,  čo je spor s tým, že vo vrcholovo bimagickom grafe sú vrcholom priradené navzájom rôzne čísla.
\end{proof}

\begin{theorem}
\label{vbgkij}
Pre každé  $i,j \in \mathbb{N}, 2 \leq i \leq j, (i, j) \neq (2, 2)$ platí, že graf $K_{i,j}$ je vrcholovo bimagický.
\end{theorem}

\begin{proof} Indukciou vzhľadom na $i,j$. Najprv ukážeme, že grafy $K_{2,j}, K_{3,j}, K_{4,4}$ a $K_{4,5}$ sú vrcholovo bimagické. \\

Graf $K_{2,n}$ pre $n \geq 3$ je vrcholovo bimagický - stačí do prvej partície dať prvky $\frac{n(n-1)}{2} + 1$ a $\frac{n(n-1)(3n^2 - 7n + 14)}{24}$ a do druhej partície prvky $1$ až $n - 1$ spolu s $\frac{n(n-1)(3n^2 - 7n + 14)}{24} + 1$. \\

Graf $K_{3,n}$ pre $n \geq 3$ je vrcholovo bimagický - stačí do prvej partície dať prvky $1, \frac{n(n+1)}{2} - 1$ a $\frac{n(n+1)(3n^2 - n - 14)}{24} + 1$ a do druhej partície prvky $2$ až $n$ spolu s $\frac{n(n+1)(3n^2 - n - 14)}{24} + 2$. \\

Graf $K_{4,4}$ je vrcholovo bimagický - stačí do prvej partície dať prvky $1, 4, 6, 7$ a do druhej partície prvky $2, 3, 5, 8$. \\

Graf $K_{4,5}$ je vrcholovo bimagický - stačí do prvej partície dať prvky $2, 12, 13, 15$ a do druhej partície prvky $1, 4, 8, 10, 19$. \\

Teraz dokážeme, že ak je $K_{i,j}$ vrcholovo bimagický, tak je aj $K_{i+2,j+3}$. Do jednej partície stačí pridať prvky $4k, 5k$ a do druhej prvky $k, 2k, 6k$, pričom $k \in \mathbb{N}$ zvolíme dostatočne veľké (aby boli prvky navzájom rôzne).
\end{proof}

Z vety \ref{vbgcondition} sme schopní priamo implementovať algoritmus \ref{algvbgcondition}, ktorý overí, či zadaný graf môže byť vrcholovo bimagický. 

\begin{result} Jediné súvislé grafy s menej ako $10$ vrcholmi, ktoré spĺňajú všetky podmienky z vety \ref{vbgcondition} (a teda môžu byť vrcholovo bimagické), sú $K_{2,3}, K_{2,4}, K_{2,5}, K_{2,6}, K_{2,7}, \\
 K_{3,3}, K_{3,4}, K_{3,5}, K_{3,6}, K_{4,4}, K_{4,5}, K_{2,3,3}, K_{2,3,4}$ a $K_{3,3,3}$.
\end{result}

Podľa vety \ref{vbgkij} vieme, že $K_{i,j}$ je vrcholovo bimagický pre $i,j \geq 2, (i,j) \neq (2,2)$. Môžeme sa ľahko presvedčiť, že aj zvyšné grafy majú vrcholové bimagické ohodnotenie:
\begin{gather*}
K_{2,3,3} \rightarrow 11, 13 ~|~ 1, 8, 15 ~|~ 3, 5, 16 \\
K_{2,3,4} \rightarrow 11, 19 ~|~ 1, 9, 20 ~|~ 1, 2, 6, 21 \\
K_{3,3,3} \rightarrow 1, 12, 14 ~|~ 2, 9, 16 ~|~ 4, 6, 17
\end{gather*}

\begin{definition} Nech $G$ je vrcholovo bimagický graf s $n$ vrcholmi. Ak sú vrcholom priradené čísla z množiny $\{1, 2, \dots , n\}$, tak $G$ nazývame \textbf{vrcholovo superbimagickým grafom}.
\end{definition} 

Existuje vrcholovo superbimagický graf? Keďže zatiaľ vieme vrchovo bimagicky ohodnotiť len kompletné bipartitné grafy, musíme skúmať tie.

\begin{theorem}
\label{vsbg1}
Pre $n \in \{7, 8, 11, 12\}$  existuje práve jeden vrcholovo superbimagický kompletný bipartitný graf.
\end{theorem}

\begin{proof} Hrubou silou.
\begin{gather*}
n = 7 \rightarrow \{1, 2, 4, 7\} ~|~ \{3, 5, 6\} \\
n = 8 \rightarrow \{1, 4, 6, 7\} ~|~ \{2, 3, 5, 8\} \\
n = 11 \rightarrow \{1, 3, 4, 5, 9, 11\} ~|~ \{2, 6, 7, 8, 10\} \\
n = 12 \rightarrow \{1, 3, 7, 8, 9, 11\} ~|~ \{2, 4, 5, 6, 10, 12\}
\end{gather*}
\end{proof}

\begin{theorem}
\label{vsbgkij}
Vrcholovo superbimagický kompletný bipartitný graf s $n$ vrcholmi existuje práve vtedy, keď $n = 4k$ alebo $n = 4k-1$ pre $k \geq 2$.
\end{theorem}

\begin{proof} Najprv dokážeme, že ak $n = 4k$ alebo $n = 4k-1, k \geq 2$, tak existuje vrcholovo superbimagický kompletný bipartitný graf, ktorý má $n$ vrcholov. Stačí nám dokázať, že dané tvrdenie platí pre všetky $n$ tvaru $8k-1, 8k, 8k+3, 8k+4$. To urobíme matematickou indukciou vzhľadom na $k$. Pre $k = 1$ existujú vyhovujúce ohodnotenia (uvedené vo vete \ref{vsbg1}). \\

Indukčný krok je potom jednoduchý. Uvedieme ho pre prípad $n = 8k$, ostatné z nich sú analogické. Predpokladajme, že pre $n = 8k$ existuje superbimagické ohodnotenie. Pre $n = 8(k+1)$ ho zostrojíme nasledovne: najprv vezmeme superbimagické ohodnotenie pre $n = 8k$ (ostanú nám nepriradené čísla $8k+1, \dots 8k+8$). Potom na jednu stranu pridáme čísla $8k+1, 8k+4, 8k+6, 8k+7$ a na druhú stranu $8k+2, 8k+3, 8k+5, 8k+8$. Na obe strany sme pridali čísla s rovnakým súčtom aj rovnakým súčtom druhých mocnín. Ak bolo pôvodné ohodnotenie superbimagické, tak aj nové ohodnotenie pre $n = 8(k+1)$ je superbimagické. \\

Ak $n = 4k+1$ alebo $n = 4k+2, k \in \mathbb{N}$, tak požadovaný graf neexistuje. Predpokladajme sporom, že taký graf existuje. Potom sa množina $\{1, 2, \dots , n\}$ dá rozdeliť na dve disjunktné podmnožiny s rovnakým súčtom aj súčtom druhých mocnín. Súčet tejto množiny je $\frac{n(n+1)}{2}$. Teda každá podmnožina by musela mať súčet $\frac{n(n+1)}{4}$. Lenže ak  $n = 4k+1$ alebo $n = 4k+2, k \in \mathbb{N}$, tak výraz $\frac{n(n+1)}{4}$ nie je celé číslo, čo je spor.
\end{proof}

\begin{hypothesis} Každý vrcholovo bimagický graf je kompletný bipartitný.
\end{hypothesis}



\subsection{Hranovo bimagické grafy}

\begin{definition} Nech $G$ je súvislý jednoduchý netriviálny graf. Ak existuje hranové ohodnotenie grafu $G$ také, že platí:

\begin{enumerate}
\item hranám sú priradené navzájom rôzne kladné celé čísla
\item súčty hodnôt hrán incidentných s jednotlivými vrcholmi sú rovnaké
\item súčty druhých mocnín hodnôt hrán incidentných s jednotlivými vrcholmi sú rovnaké
\end{enumerate}

tak $G$ nazývame \textbf{hranovo bimagickým grafom}.
\end{definition} 

Jedným z hranovo bimagických grafov je cesta na dvoch vrcholoch s ľubovoľným kladným ohodnotením. \\

Zaujímavou skupinou potenciálne hranovo bimagických grafov sú kompletné bipartitné regulárne grafy $K _{n,n}$. Tie sú ekvivalentné semibimagickým štvorcom veľkosti $n \times n$. Keďže sú známe semibimagické štvorce veľkosti $n \times n$ pre $n \geq 4$, tak $K _{n,n}$ je hranovo bimagický pre $n \geq 4$.

\begin{theorem}
\label{hbgdegree1}
Nech $G$ je hranovo bimagický graf, ktorý má aspoň tri vrcholy. Potom $G$ neobsahuje vrchol stupňa $1$.
\end{theorem}

\begin{proof} Sporom. Nech $u$ je vrchol stupňa 1, $v$ je jeho jediný sused a $x$ je hodnota hrany medzi vrcholmi $u,v$. Potom podľa $u$ musí platiť, že magický súčet je $x$. Lenže ak je $G$ súvislý a má aspoň tri vrcholy, tak vrchol $v$ musí mať ešte ďalší susedný vrchol $w$. Nech $y$ je hodnota hrany medzi vrcholmi $v,w$. Potom však podľa $v$ musí platiť, že magický súčet je aspoň $x + y > x$, čo je spor.
\end{proof} 

\begin{theorem} Nech $G$ je hranovo bimagický graf. Potom $G$ neobsahuje vrchol stupňa $2$.
\end{theorem}

\begin{proof} Sporom. Nech $u$ je vrchol stupňa 2. Označme jeho susedov $v,w$. Nech $b,c$ sú ohodnotenia hrán medzi $u,v$, resp. $u,w$. Nech $a_1, a_2, \dots , a_n$ sú ohodnotenia hrán, ktoré sú incidentné s $w$ okrem hrany $uw$. Podľa $u$ musí platiť, že magický súčet je $b+c$ a bimagický súčet je $b^2 + c^2$. Podľa $w$ musí platiť, že magický súčet je $c + \sum_{k=1}^{n} a_n$ a bimagický súčet je $c^2 + \sum_{k=1}^{n} a^2_n$. Z toho vyplýva, že by sústava z jednotkovej lemy mala riešenie, čo je spor.
\end{proof}

\begin{consequence}
\label{hbgtree} 
Jediný hranovo bimagický strom je cesta na dvoch vrcholoch.
\end{consequence}

\begin{consequence}
\label{hbgdegree3} 
Nech $G$ je hranovo bimagický graf, ktorý má aspoň tri vrcholy. Potom má $G$ minimálny stupeň vrchola $3$.
\end{consequence}

\begin{theorem} Nech $G$ je hranovo bimagický graf, ktorý má aspoň tri vrcholy. Nech $u,v$ sú ľubovoľné dva susedné vrcholy. Potom $max \{d(u), d(v)\} \geq 4$.
\end{theorem}

\begin{proof} Sporom. Predpokladajme, že existuje dvojica susedných vrcholov $u,v$ takých, že $max \{d(u), d(v)\} < 4$. Z dôsledku \ref{hbgdegree3} potom vyplýva, že nutne $d(u) = d(v) = 3$. Označme $x$ hodnotenie hrany medzi $u,v$. Označme $y_1, y_2$ zvyšné hodnotenia hrán z $u$ a $z_1, z_2$ zvyšné hodnotenia hrán z $v$. Podľa $u$ musí platiť, že magický súčet je $x + y_1 + y_2$ a bimagický súčet je $x^2 + y^2_1 + y^2_2$. Podľa $v$ musí platiť, že magický súčet je $x + z_1 + z_2$ a bimagický súčet je $x^2 + z^2_1 + z^2_2$. Teda musí platiť $y_1 + y_2 = z_1 + z_2$ aj $y^2_1 + y^2_2 = z^2_1 + z^2_2$. Z duplikačnej lemy potom vyplýva, že $z_1 = y_1$ alebo $z_1 = y_2$, čo je spor s tým, že hranám budú priradené navzájom rôzne čísla.
\end{proof} 

\begin{consequence} Kubické grafy nie sú hranovo bimagické.
\end{consequence}

\begin{consequence} Nech $G$ je hranovo bimagický graf s aspoň tromi vrcholmi a $\alpha (G)$ je jeho číslo nezávislosti. Potom má $G$ aspoň $2V(G) - \frac{\alpha (G)}{2}$ hrán.
\end{consequence}

\begin{proof} Ak pre ľubovoľné dva susedné vrcholy $u,v$ platí $max \{d(u), d(v)\} \geq 4$, potom nemôžu v grafe $G$ existovať dva susedné vrcholy stupňa $3$. Z toho vyplýva, že počet vrcholov stupňa $3$ nemôže byť väčší ako $\alpha (G)$ a ostatné musia byť stupňa aspoň $4$. Preto $G$ musí mať aspoň $\frac{3 \alpha (G) + 4[V(G) - \alpha (G)]}{2} = \frac{4 V(G) - \alpha(G)}{2} = 2 V(G) - \frac{\alpha (G)}{2}$ hrán.
\end{proof}

\begin{note} Číslo nezávislosti grafu $G$ je najväčší počet vrcholov $G$, z ktorých žiadne dva nie sú spojené hranou.
\end{note}

\begin{theorem} Existuje graf, ktorý je hranovo bimagický a nie je kompletný bipartitný.
\end{theorem}

\begin{proof} Nech $G$ je hranovo bimagický kompletný bipartitný regulárny graf s nejakým ohodnotením. Nech $e$ je hrana, ktorá má najmenšiu hodnotu. Keďže je regulárny, tak podľa posunovej lemy môžeme od všetkých hrán odrátať hodnotu hrany $e$. Tým dostaneme hranovo bimagický kompletný bipartitný graf, ktorý má práve jednu nulovú hranu $e$. Zjavne vieme túto hranu z grafu odstrániť a magická aj bimagická podmienka ostane zachovaná. Graf $G - e$ je teda hranovo bimagický, a pritom nie je kompletný bipartitný.
\end{proof}

\begin{definition} Nech $G$ je hranovo bimagický graf s $n$ vrcholmi. Ak sú hranám priradené čísla z množiny $\{1, 2, \dots , n\}$, tak $G$ nazývame \textbf{hranovo superbimagickým grafom}.
\end{definition} 

Keďže Georges Pfeffermann našiel v 19. storočí superbimagický štvorec veľkosti $8 \times 8$, vieme, že existuje hranovo superbimagický graf - je ním kompletný bipartitný graf na $8$ vrcholoch.

\begin{hypothesis} Každý hranovo bimagický graf je kompletný bipartitný alebo kompletný bipartitný bez jednej hrany.
\end{hypothesis} 



\section{Multiplikatívne magické grafy}

\subsection{Vrcholovo multiplikatívne magické grafy}

\begin{definition} Nech $G$ je súvislý jednoduchý netriviálny graf. Ak existuje vrcholové ohodnotenie grafu $G$ také, že platí:

\begin{enumerate}
\item vrcholom sú priradené navzájom rôzne kladné celé čísla
\item súčty hodnôt susedov jednotlivých vrcholov sú rovnaké
\item súčiny hodnôt susedov jednotlivých vrcholov sú rovnaké
\end{enumerate}

tak $G$ nazývame \textbf{vrcholovo multiplikatívnym magickým grafom}.
\end{definition} 

\begin{theorem}
\label{vmmgdegree1}
Nech $G$ je vrcholovo multiplikatívny magický graf. Ak $G$ obsahuje dvojicu vrcholov stupňa 1, potom majú spoločného suseda.
\end{theorem}

\begin{proof} Rovnaký ako dôkaz vety \ref{vbgdegree1}.
\end{proof}

\begin{consequence} Jediný vrcholovo multiplikatívny magický strom je $K_{1,3}$.
\end{consequence}

\begin{proof} Z vety \label{vmmgdegree1} vyplýva, že jediným stromom, ktorý môže byť vrcholovo multiplikatívnym magickým, je $K_{1,n}$ pre nejaké $n \in \mathbb{N}$. Nech $v$ je koreň tohto stromu a $v_1, \dots , v_n$ sú jeho listy. Nech $b$ je hodnota koreňa a $a_1, \dots , a_n$ sú hodnoty jeho listov. Podľa $v$ má graf magický súčet $\sum_{k=1}^{n} a_k$ a podľa $v_1$ má graf magický súčet $b$. Podľa $v$ má graf súčin $\prod_{k=1}^{n} a_k$ a podľa $v_1$ má graf súčin $b$. To odpovedá sústave z jednotkovej lemy, ktorá má jediné riešenie ($n = 3, a_1 = 1, a_2 = 2, a_3 = 3, b = 6$). Z toho vyplýva, že iba $K_{1,3}$ je multiplikatívny magický.
\end{proof}

Nasledovné vety vieme dokázať rovnakými technikami ako pri vrcholovo bimagických grafoch:

\begin{theorem} Nech $G$ je vrcholovo multiplikatívny magický graf. Potom majú všetky vrcholy stupňa 2 rovnakú množinu susedov.
\end{theorem}

\begin{theorem} Nech $G$ je vrcholovo multiplikatívny magický graf. Potom buď má každá dvojica nesusedných vrcholov stupňa 3 rovnakú množinu susedov, alebo nemá spoločného suseda.
\end{theorem}

\begin{theorem} Nech $G$ je vrcholovo multiplikatívny magický graf. Nech $e$ je most v $G$. Nech $G_1, G_2$ sú komponenty, ktoré vzniknú odobraním $e$ z $G$. Potom $G_1 ~\cup~ e, G_2 ~\cup~ e$ sú vrcholovo multiplikatívne magické grafy. 
\end{theorem}

\begin{theorem} Jediný kubický vrcholovo multiplikatívny magický graf je $K_{3,3}$.
\end{theorem}

Ako je to s vrcholovo multiplikatívnymi supermagickými grafmi?

\begin{theorem} Kompletný bipartitný graf nemôže byť vrcholovo multiplikatívny supermagický.
\end{theorem}

\begin{proof} Sporom. Nech $G$ je kompletný bipartitný a vrcholovo multiplikatívny supermagický graf s $n$ vrcholmi. Nech $p$ je najväčšie prvočíslo, ktoré neprevyšuje $n$. Toto prvočíslo sa môže vyskytovať iba v jednej partícii. To však znamená, že súčin oboch partícii nemôže byť rovnaký (jeden súčin bude mať $p$ vo svojom rozklade a druhý nie).
\end{proof}

\begin{theorem}
\label{vmmgkij}
Pre každé $i,j \in \mathbb{N}, 2 \leq i \leq j, (i, j) \neq (2, 2)$ platí, že graf $K_{i,j}$ je vrcholovo multiplikatívny magický.
\end{theorem}

\begin{proof} Indukciou vzhľadom na $i,j$. Najprv ukážeme, že grafy $K_{i,j}, i \in \{2,3\}, K_{4,4}$ a $K_{4,5}$ sú vrcholovo multiplikatívne magické. \\

Grafy $K_{2,3}, K_{2,4}, K_{4,4}$ a $K_{4,5}$ sú vrcholovo multiplikatívne magické, pretože:
\begin{itemize}
\item Pre graf $K_{2,3}$ stačí priradiť jednej partícii prvky $5, 12$ a druhej partícii prvky $1, 6, 10$.
\item Pre graf $K_{2,4}$ stačí priradiť jednej partícii prvky $9, 16$ a druhej partícii prvky $1, 2, 4, 18$.
\item Pre graf $K_{4,4}$ stačí priradiť jednej partícii prvky $1, 5, 6, 12$ a druhej partícii prvky $2, 3, 4, 15$.
\item Pre graf $K_{4,5}$ stačí priradiť jednej partícii prvky $2, 10, 20, 27$ a druhej partícii prvky $1, 3, 6, 24, 25$.
\end{itemize}

Graf $K_{2,n}$ pre $n \geq 5$ je vrcholovo multiplikatívny magický - stačí do prvej partície dať prvky $(n-1)! + 1$ a $(n-1)! [(n-1)! + 1 - \frac{n(n-1)}{2}]$ a do druhej partície prvky $1, 2, \dots , n-2, n-1, [(n-1)! + 1] [(n-1)! + 1 - \frac{n(n-1)}{2}]$. \\

Graf $K_{3,n}$ pre $n \geq 3$ je vrcholovo multiplikatívny magický - stačí do prvej partície dať prvky $1, n! + 1$ a $n! [n! + 3 - \frac{n(n+1)}{2}]$ a do druhej partície prvky $2, \dots , n-1, n, (n! + 1) [n! + 3 - \frac{n(n+1)}{2}]$. \\

Teraz dokážeme, že ak je $K_{i,j}$ vrcholovo multiplikatívny magický, tak to platí aj pre $K_{i+2,j+3}$. Do jednej partície stačí pridať prvky $2xy, 2xy - x - y$ a do druhej prvky $2(2xy - x - y), x, y$, pričom $x,y \in \mathbb{N}$ zvolíme dostatočne veľké (aby boli prvky navzájom rôzne).
\end{proof}



\subsection{Hranovo multiplikatívne magické grafy}

\begin{definition} Nech $G$ je súvislý jednoduchý netriviálny graf. Ak existuje hranové ohodnotenie grafu $G$ také, že platí:

\begin{enumerate}
\item hranám sú priradené navzájom rôzne kladné celé čísla
\item súčty hodnôt hrán incidentných s jednotlivými vrcholmi sú rovnaké
\item súčiny hodnôt hrán incidentných s jednotlivými vrcholmi sú rovnaké
\end{enumerate}

tak $G$ nazývame \textbf{hranovo multiplikatívnym magickým grafom}.
\end{definition} 

Jedným z hranovo multiplikatívnych magických grafov je cesta na dvoch vrcholoch s ľubovoľným kladným ohodnotením.

\begin{theorem} Nech $G$ je hranovo multiplikatívny magický graf, ktorý má aspoň tri vrcholy. Potom $G$ neobsahuje vrchol stupňa 1.
\end{theorem}

\begin{proof} Rovnaký ako dôkaz vety \ref{hbgdegree1}.
\end{proof}

\begin{theorem} Nech $G$ je hranovo multiplikatívny magický graf. Potom $G$ neobsahuje vrchol stupňa 2.
\end{theorem}

\begin{proof} Sporom. Nech $u$ je vrchol stupňa 2. Označme jeho susedov $v,w$. Nech $b,c$ sú ohodnotenia hrán medzi $u,v$, resp. $u,w$. Nech $a_1, a_2, \dots , a_m$ sú ohodnotenia hrán, ktoré sú incidentné s $v$ okrem hrany $uv$. Nech $a_1^\prime, a_2^\prime, \dots , a_n^\prime$ sú ohodnotenia hrán, ktoré sú incidentné s $w$ okrem hrany $uw$. Podľa $u$ musí platiť, že magický súčet je $b+c$ a multiplikatívny súčin je $bc$. Podľa $v$ musí platiť, že magický súčet je $b + \sum_{k=1}^{m} a_m$ a multiplikatívny súčin je $b \prod_{k=1}^{m} a_m$. Podľa $w$ musí platiť, že magický súčet je $c + \sum_{k=1}^{n} a_n^\prime$ a multiplikatívny súčin je $c  \prod_{k=1}^{n} a_n^\prime$. Z toho vyplýva, že by sústava z jednotkovej lemy mala dve rôzne riešenia, čo je spor.
\end{proof}

\begin{consequence}
Jediný hranovo multiplikatívny magický strom je cesta na dvoch vrcholoch.
\end{consequence}

\begin{consequence} Každý hranovo multiplikatívny magický graf má minimálny stupeň vrchola $3$.
\end{consequence}

\section{Magické obdĺžniky}

\begin{theorem} V každom magickom obdĺžniku platí, že zámenou ľubovoľných dvoch riadkov alebo stĺpcov dostaneme opäť magický obdĺžnik.
\end{theorem}

\begin{proof}
Zrejmý.
\end{proof}

\begin{consequence} Ku každému magickému obdĺžniku $A$ vieme zostrojiť magický obdĺžnik $B$, v ktorom platí, že jeho prvky v prvom riadku aj prvom stĺpci sú usporiadané vzostupne.
\end{consequence}

\begin{consequence}
\label{rectangleorder}
V každom magickom obdĺžniku si vieme bez ujmy na všeobecnosti určiť poradie stĺpcov aj poradie prvkov v prvom stĺpci.
\end{consequence}

\subsection{Bimagické obdĺžniky}

\begin{definition} Nech $A$ je matica veľkosti $m \times n$. Ak platí:

\begin{enumerate}
\item prvkami matice sú navzájom rôzne kladné celé čísla
\item súčty prvkov v jednotlivých riadkoch sú rovnaké
\item súčty prvkov v jednotlivých stĺpcoch sú rovnaké
\item súčty druhých mocnín prvkov v jednotlivých riadkoch sú rovnaké
\item súčty druhých mocnín prvkov v jednotlivých stĺpcoch sú rovnaké
\end{enumerate}

tak $A$ nazývame \textbf{bimagickým obdĺžnikom}.
\end{definition}

\begin{theorem}
\label{rectanglemn}
Nech $A$ je bimagický obdĺžnik veľkosti $m \times n$. Potom $m,n \geq 3$ alebo $(m, n) = (1, 1)$.
\end{theorem}

\begin{proof} Ak $m = 1$, tak má obdĺžnik len jeden riadok. Ak majú byť jeho súčty v stĺpci rovnaké, musí byť v každom stĺpci rovnaké číslo. Ak $n \geq 2$, obdĺžnik by obsahoval duplicitné prvky, čo je spor. Z toho vyplýva, že nutne $n = 1$. \\

Ak $m = 2$, tak z predošlého odstavca vieme, že $n \geq 2$. Tým dostaneme pre dva riadky a dva stĺpce rovnicu z duplikačnej lemy, z čoho vyplýva, že obdĺžnik by obsahoval duplicitné prvky, čo je spor.
\end{proof}

\begin{theorem} 
\label{rectangle1}
Nech $A$ je bimagický obdĺžnik. Potom ho vieme transformovať na taký bimagický obdĺžnik $B$, že jeho najmenší prvok je $1$.
\end{theorem}

\begin{proof} Využijeme normálnu formu bimagických útvarov. Nech $min_A$ je najmenší prvok $A$. Bimagický obdĺžnik $B$ zostrojíme tak, že ku každému prvku $A$ pripočítame $1 - min_A$. Z posunovej lemy zároveň vyplýva, že ak boli magické aj bimagické súčty rovnaké v $A$, tak budú aj v $B$. Teda $B$ je bimagický obdĺžnik.
\end{proof}

\begin{theorem} 
\label{rectangle1cond}
Nech $A$ je bimagický obdĺžnik veľkosti $3 \times n$ pre $n \geq 4$, ktorého najmenší prvok je $1$. Nech $S$ je magický a $T$ je bimagický súčet tohto obdĺžnika. Potom je výraz $2T - (S-1)^2 - 2$ druhou mocninou kladného celého čísla.
\end{theorem}

\begin{proof}
Nech $x,y$ sú zvyšné prvky v stĺpci, kde sa nachádza $1$. Potom musia platiť vzťahy:
\begin{gather*}
x + y = S - 1 \\
x^2 + y^2 = T - 1
\end{gather*}

Z prvého vzťahu vyjadríme $y = S - 1 - x$. Dosadením do druhého a následnou úpravou dostaneme kvadratickú rovnicu $2x^2 - 2x(S - 1) + (S - 1)^2 - T + 1 = 0$. Jej diskriminant je $4[2T - (S - 1)^2 - 2]$. Keďže $x \in \mathbb{N}$, nutne musí byť $2T - (S - 1)^2 - 2$ druhou mocninou kladného celého čísla.
\end{proof}

%\begin{theorem}
%\label{rectangleodd}
%Nech $A$ je bimagický obdĺžnik veľkosti $3 \times n$. Potom ho vieme transformovať na bimagický obdĺžnik $B$, pre ktorý platí, že v každom jeho stĺpci je aspoň jedno nepárne číslo.
%\end{theorem}

%\begin{proof} Predpokladajme, že v $A$ existuje stĺpec, ktorého všetky tri prvky sú párne čísla. Z toho vyplýva, že ich bimagický súčet je deliteľný $4$. Kedy môže byť súčet $a^2 + b^2 + c^2$ deliteľný $4$? Prvky $a,b,c$ musia byť tvaru $4k$ alebo $4k+2$, lebo ak by boli ľubovoľné z nich tvaru $4k+1$ alebo $4k+3$, ich druhá mocnina by dávala zvyšok $1$ po delení $4$ - výraz $a^2 + b^2 + c^2$ by už nemohol byť deliteľný $4$. Z toho vyplýva, že každý stĺpec v $A$ obsahuje iba párne prvky. Vieme ho preto transformovať na bimagický obdĺžnik $B$ jednoducho tak, že každý prvok vydelíme $2$ (alebo mocninou $2$, tak aby $B$ obsahovalo nepárne prvky).
%\end{proof}

Na základe viet \ref{rectangle1} a \ref{rectangle1cond} vieme implementovať algoritmy \ref{algbos} a \ref{algboh}.

\begin{result} Neexistuje bimagický obdĺžnik veľkosti $3 \times n$, ktorého súčet prvkov v stĺpci je menší ako $384$. Podarilo sa nájsť niekoľko magických obdĺžnikov veľkosti $3 \times 6$, $3 \times 8$ a $3 \times 10$ s bimagickými stĺpcami a jediným nebimagickým riadkom. Najmenší z nich má súčet v stĺpci rovný $90$:
\end{result}

\begin{center}
$\begin{array}{ |c|c|c|c|c|c| } 
\hline
1 & 2 & 3 & 57 & 58 & 59 \\ 
\hline
42 & 37 & 53 & 26 & 9 & 13 \\ 
\hline
47 & 51 & 34 & 7 & 23 & 18 \\ 
\hline
\end{array}$
\end{center}

\begin{result} Neexistuje bimagický obdĺžnik veľkosti $3 \times n$, ktorého prvky sú kladné celé čísla menšie ako $400$.
\end{result} 

Spomínané algoritmy vieme ľahko modifikovať tak, aby hľadali aj väčšie bimagické obdĺžniky. Tým sme prišli k ďalšiemu zisteniu:

\begin{result} Neexistuje bimagický obdĺžnik veľkosti $4 \times n$, ktorého súčet prvkov v stĺpci je menší ako $82$. Podarilo sa nájsť niekoľko magických obdĺžnikov veľkosti $3 \times 6$ s bimagickými stĺpcami a len dvomi rôznymi bimagickými súčtami v riadkoch. Najmenší z nich má súčet v stĺpci rovný $68$:
\end{result}

\begin{center}
$\begin{array}{ |c|c|c|c|c|c| } 
\hline
1 & 30 & 24 & 19 & 22 & 6 \\ 
\hline
6 & 2 & 29 & 13 & 31 & 11 \\ 
\hline
23 & 21 & 3 & 32 & 5 & 18 \\ 
\hline
28 & 15 & 12 & 4 & 10 & 33 \\ 
\hline
\end{array}$
\end{center}

%\begin{theorem} 
%\label{rectangle0}
%Nech $A$ je bimagický obdĺžnik. Potom ho vieme transformovať na taký bimagický obdĺžnik $B$ s potenciálne zápornými prvkami, že magický súčet v jeho riadku aj stĺpci je rovný $0$.
%\end{theorem}

%\begin{proof} Nech $S_r, S_s$ sú súčty v riadku a stĺpci v bimagickom obdĺžniku $A$ veľkosti $m \times n$. Keďže $A$ má $m$ riadkov a $n$ stĺpcov, musí platiť $m S_r = n S_s$, z čoho vyplýva $\frac{m}{n} = \frac{S_s}{S_r}$. Teda $S_s = km$ a $S_r = kn$ pre nejaké $k \in \mathbb{N}$. Ak od každého prvku v $A$ %odpočítame $k$, vytvoríme tým nový obdĺžnik $B$. Zjavne $B$ má súčty v riadku aj stĺpci nulové. Z posunovej lemy zároveň vyplýva, že ak boli magické aj bimagické súčty rovnaké v $A$, tak budú aj v $B$. Teda $B$ je bimagický obdĺžnik s potenciálne zápornými prvkami.
%\end{proof}

\begin{hypothesis} Neexistuje bimagický obdĺžnik veľkosti $m \times n$ pre $m \neq n$.
\end{hypothesis}



\subsection{Multiplikatívne magické obdĺžniky}

\begin{definition} Nech $A$ je matica veľkosti $m \times n$. Ak platí:

\begin{enumerate}
\item prvkami matice sú navzájom rôzne kladné celé čísla
\item súčty prvkov v jednotlivých riadkoch sú rovnaké
\item súčty prvkov v jednotlivých stĺpcoch sú rovnaké
\item súčiny prvkov v jednotlivých riadkoch sú rovnaké
\item súčiny prvkov v jednotlivých stĺpcoch sú rovnaké
\end{enumerate}

tak $A$ nazývame \textbf{multiplikatívnym magickým obdĺžnikom}.
\end{definition} 

\begin{theorem} Nech $A$ je multiplikatívny magický obdĺžnik veľkosti $m \times n$. Potom $m,n \geq 3$ alebo $(m, n) = (1, 1)$.
\end{theorem}

\begin{proof} Rovnaký ako dôkaz vety \ref{rectanglemn}.
\end{proof}

\begin{theorem}
\label{rectanglemax}
Nech $A$ je multiplikatívny magický obdĺžnik veľkosti $m \times n, m \leq n$ a $M$ je jeho najväčší prvok. Potom pre všetky $x \in A$ platí, že $x$ je zložené číslo alebo $xn \leq M$.
\end{theorem}

\begin{proof} Sporom. Nech existuje $x \in A$ také, že $x$ nie je zložené číslo. Potom nutne platí, že každý súčin v $n$ riadkoch alebo stĺpcoch je deliteľný $x$. Ak však platí $xn > M$, tak máme k dispozícii najviac $n-1$ prvkov, ktoré sú deliteľné $x$ a neprevyšujú $M$. Z Dirichletovho princípu potom vyplýva, že aspoň v dvoch riadkoch alebo stĺpcoch musia byť rovnaké prvky, čo je spor.
\end{proof}

Využitím vety \ref{rectanglemax} vieme implementovať algoritmus \ref{algmmos} a jeho modifikáciu pre väčšie multiplikatívne magické obdĺžniky. 

\begin{result} Neexistuje multiplikatívny magický obdĺžnik veľkosti $3 \times n$, ktorého súčet prvkov v stĺpci je menší ako $4000$. Podarilo sa nájsť niekoľko multiplikatívnych obdĺžnikov veľkosti $3 \times 6$ a $3 \times 9$ s magickými stĺpcami. Najmenší z nich má súčet v stĺpci rovný $485$:
\end{result}

\begin{center}
$\begin{array}{ |c|c|c|c|c|c| } 
\hline
14 & 294 & 16 & 385 & 60 & 396 \\ 
\hline
231 & 15 & 154 & 72 & 392 & 40 \\ 
\hline
240 & 176 & 315 & 28 & 33 & 49 \\ 
\hline
\end{array}$
\end{center}

\begin{result} Neexistuje multiplikatívny magický obdĺžnik veľkosti $4 \times n$, ktorého súčet prvkov v stĺpci je menší ako $160$. Našli sme jediný magický obdĺžnik veľkosti $4 \times 6$ s multiplikatívnymi stĺpcami a dvoma multiplikatívnymi riadkami:
\end{result}

\begin{center}
$\begin{array}{ |c|c|c|c|c|c| } 
\hline
6 & 32 & 64 & 18 & 90 & 24 \\ 
\hline
42 & 81 & 20 & 56 & 14 & 21 \\ 
\hline
48 & 35 & 9 & 10 & 36 & 96 \\ 
\hline
60 & 8 & 63 & 72 & 16 & 15 \\ 
\hline
\end{array}$
\end{center}

\begin{hypothesis} Neexistuje multiplikatívny magický obdĺžnik veľkosti $m \times n$ pre $m \neq n$.
\end{hypothesis}

